---
/**
 * RelatedPosts - Related posts section
 */
import type { CollectionEntry } from 'astro:content';
import { formatDate } from '@/lib/blog';
import CategoryBadge from './CategoryBadge.astro';

interface Props {
  posts: CollectionEntry<'blog'>[];
}

const { posts } = Astro.props;

// Don't render if no related posts
if (posts.length === 0) return null;
---

<section class="mt-16 pt-12 border-t border-border">
  <h2 class="text-2xl font-serif text-gris-900 dark:text-crema-100 mb-8">
    Articulos relacionados
  </h2>

  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {posts.map((post) => (
      <a
        href={`/blog/${post.id}/`}
        class="group block bg-gris-50 dark:bg-verde-900/20 rounded-xl p-5 border border-border hover:border-verde-300 dark:hover:border-verde-700 transition-all duration-300 hover:shadow-lg"
      >
        <CategoryBadge category={post.data.category} size="sm" linked={false} />

        <h3 class="mt-3 font-serif text-lg text-gris-900 dark:text-crema-100 group-hover:text-verde-700 dark:group-hover:text-verde-400 transition-colors line-clamp-2">
          {post.data.title}
        </h3>

        <time
          datetime={post.data.pubDate.toISOString()}
          class="block mt-2 text-sm text-gris-500 dark:text-crema-400"
        >
          {formatDate(post.data.pubDate)}
        </time>
      </a>
    ))}
  </div>
</section>
